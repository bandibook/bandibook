<details>
  <summary>ë„ì€</summary>
  > ëª¨ë“ˆí˜•ì´ë€, ì„œë¡œ ì˜ì¡´ì„±ì´ ë‚®ì€ ê¸°ëŠ¥ë“¤ì´ ëª¨ë“ˆë¡œì¨ ì €ì¥ëœ í˜•íƒœë¥¼ ì˜ë¯¸
> ì´ë²ˆ ì¥ì—ì„œëŠ” ES5 ë¬¸ë²•ì„ ì‚¬ìš©í•˜ëŠ” AMD, CommonJS, UMD ë°©ì‹ì„ ì‚´í´ë³¸ë‹¤.

## 10.1 ìŠ¤í¬ë¦½íŠ¸ ë¡œë”(script loader)

- ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì›¹í˜ì´ì§€ì— ë™ì ìœ¼ë¡œ ë¡œë“œí•˜ê±°ë‚˜ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë„êµ¬ ë˜ëŠ” ë©”ì»¤ë‹ˆì¦˜
- ëª¨ë“ˆ ë¡œë”(module loader)ë¼ê³  ë¶€ë¥´ê¸°ë„ í•˜ëŠ” ë“¯
- ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨ë“ˆí™”ë¥¼ í•¨ê»˜ ì²˜ë¦¬

_**ğŸ¤” ìŠ¤í¬ë¦½íŠ¸ ë¡œë”ëŠ” ì™œ í•„ìš”í•œ ê²ƒ?**_

- ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ëŠ” ëª¨ë“ˆ í¬ë§·ê³¼, ìš°ë¦¬ê°€ ë¡œë“œí•˜ë ¤ëŠ” ìŠ¤í¬ë¦½íŠ¸ì˜ í¬ë§·ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸
- ë¸Œë¼ìš°ì €ëŠ” `import/export`ê°€ ìˆëŠ” `ESM`ë§Œ ì´í•´
  - ì§€ì›í•˜ì§€ ì•ŠëŠ” `AMD`, `CJS`ì„ ëƒ…ë‹¤ ì‚¬ìš©í•˜ë©´
  - ë¸Œë¼ìš°ì €ëŠ” ì´ê±¸ ì‹¤í–‰í•˜ì§€ ëª»í•¨ (`require is not defined`)
- ìŠ¤í¬ë¦½íŠ¸ ë¡œë”ëŠ”
  - ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¡œë“œí•˜ê³ 
  - ë‚´ë¶€ í¬ë©§ì„ í™•ì¸í•œ ë’¤ì— (CJSì¸ì§€ AMDì¸ì§€)
  - ì´ë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì“¸ ìˆ˜ ìˆëŠ” ë°©ì‹ìœ¼ë¡œ ê°ì‹¸ì„œ ì˜ ì‹¤í–‰ì‹œì¼œì£¼ê²Œ ëœë‹¤.

## 10.2 AMD

- ëª¨ë“ˆê³¼ ì˜ì¡´ì„± ëª¨ë‘ë¥¼ **ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œ**í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ëª¨ë“ˆ ì •ì˜ ë°©ì‹
- ë¹„ë™ê¸°ì ì´ë©´ì„œë„ ë†’ì€ ìœ ì—°ì„± â†’ ê°œë°œ ê³¼ì •ì—ì„œ í”íˆ ë°œìƒí•˜ëŠ” ì½”ë“œì™€ ëª¨ë“ˆ ê°„ ê¸´ë°€í•œ ê²°í•©ì„ ì¤„ì—¬ì£¼ëŠ” ë“±ì˜ ì¥ì 

### ëª¨ë“ˆ ì•Œì•„ë³´ê¸°

- `define`
  - ì´ë¦„ì´ ìˆëŠ” ëª¨ë“ˆ í˜¹ì€ ìµëª… ëª¨ë“ˆì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©
    ```js
    define(
        module_id, /* ì„ íƒ ì¸ì */
        [dependencies], /* ì„ íƒ ì¸ì */
        definition function {} /* ëª¨ë“ˆì´ë‚˜ ê°ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•˜ëŠ” í•¨ìˆ˜ */
    )
    ```
- `require`

  - ìµœìƒìœ„ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì´ë‚˜ ëª¨ë“ˆ ë‚´ì—ì„œ ì˜ì¡´ì„±ì„ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³ ì í•  ë•Œ ì‚¬ìš©

    ```js
    // "foo"ì™€ "bar"ë¥¼ ì™¸ë¶€ ëª¨ë“ˆì´ë¼ê³  ê°€ì •
    // ì´ ì˜ˆì œì—ì„œëŠ” ì™¸ë¶€ì—ì„œ ë¡œë“œëœ ë‘ ëª¨ë“ˆì´ ì½œë°± í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬
    require(['foo', 'bar'], function (foo, bar) {
      // ë‚˜ë¨¸ì§€ ì½”ë“œ
      foo.doSomething();
    });

    // ğŸ”˜ ë™ì ìœ¼ë¡œ ë¡œë„ë”˜ ì˜ì¡´ì„±
    define(function (require) {
      var isReady = false,
        foobar;

      // ëª¨ë“ˆ ë‚´ë¶€ì—ì„œ requireë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ê°€ì ¸ì˜¨ë‹¤
      require(['foo', 'bar'], function (foo, bar) {
        isReady = true;
        foobar = foo() + bar();
      });

      // ì´ë ‡ê²Œ ã„¹ëª¨ë“ˆì„ ë°˜í™˜
      return {
        isReady: isReady,
        foobar: foobar,
      };
    });
    ```

## 10.3 CommonJS

- ì„œë²„ ì‚¬ì´ë“œì—ì„œ ëª¨ë“ˆì„ ì„ ì–¸í•˜ëŠ” ê°„ë‹¨í•œ APIë¥¼ ì§€ì •í•˜ëŠ” ëª¨ë“ˆ ì œì•ˆ
- AMDì™€ ë‹¬ë¦¬ I/O, íŒŒì¼ ì‹œìŠ¤í…œ, í”„ë¡œë¯¸ìŠ¤ ë“± ë”ìš± ê´‘ë²”ìœ„í•œ ë²”ìœ„

### CommonJS ì‹œì‘í•˜ê¸°

- AMDì™€ ë‹¬ë¦¬ CJSëŠ” ëª¨ë“ˆì„ í•¨ìˆ˜ë¡œ ê°ì‹¸ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.
- `exports` ë³€ìˆ˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì— ë‚´ë³´ë‚´ê³ ì í•˜ëŠ” ê°ì²´ë¥¼ ë‹´ëŠ”ë‹¤.
- `require` í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ë‚´ë³´ë‚¸ ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë‹¤.

```js
// `package/lib` ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
var lib = require('package/lib');

// ëª¨ë“ˆ ë‚´ë¶€ ë¡œì§ì„ ì •ì˜
function foo() {
  lib.log('hello world');
}
// foo í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‚´ë³´ë‚¸ë‹¤.
exports.foo = foo;
```

ğŸ‘‡ ìœ„ ì½”ë“œë¥¼ AMDë¡œ

```js
define(function (require) {
  var lib = require('package/lib');

  function foo() {
    lib.log('hello world');
  }

  return {
    foobar: foo,
  };
});
```

## 10.4 UMD

```js
define(function (require, exports, module) {
  var shuffler = require('lib/shuffle');
  exports.randomize = function (input) {
    return shuffler.shuffle(input);
  };
});
```

- ëª¨ë“ˆì— ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ê³ , ì •ì˜ í•¨ìˆ˜ê°€ ìµœì†Œí•œ í•˜ë‚˜ ì´ìƒì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§ˆ ë•Œì—ë§Œ CommonJS ëª¨ë“ˆë¡œì¨ ì‘ë™í•œë‹¤ëŠ” ì ì„ ìœ ì˜

## ê¶ê¸ˆí•œ ì  ì´ê²ƒì €ê²ƒ

**_ğŸ¤” Node.jsì—ì„œ requireë¡œ esm ëª¨ë“ˆì„ ë¡œë“œí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ_**

> https://socket.dev/blog/require-esm-backported-to-node-js-20

- Node.jsì—ì„œ requireë¡œ ESMì„ ë¡œë“œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤ëŠ” ê²ƒì€
  - í˜¼í•© ì‚¬ìš©ì„ ê¶Œì¥í•œë‹¤ëŠ” ì˜ë¯¸ë³´ë‹¤ëŠ” ë“€ì–¼ í¬ë§·ì˜ ì§€ì›ì„ ì¤„ì´ê³ , ESMìœ¼ë¡œ í†µì¼í•´ ë‚˜ê°€ë ¤ëŠ” í˜¸í™˜ì„± ì¡°ì¹˜ë¡œ ë³´ì¸ë‹¤.
  - ì¥ê¸°ì ìœ¼ë¡œëŠ” ìƒˆë¡œìš´ ëª¨ë“ˆì€ ESMìœ¼ë¡œë§Œ ì‘ì„±ë˜ê³ , ì ì°¨ CJSë¥¼ ì¤„ì´ë ¤ëŠ” ë°©í–¥ìœ¼ë¡œ ë³´ì´ê¸°ë„?

_**ğŸ¤” CJS vs ESM ì„±ëŠ¥ì°¨ì´?**_

> - https://stackoverflow.com/questions/71780629/is-there-any-performance-difference-in-es-modules-vs-common-js-modules-in-nodejs
> - https://vectoscalar.com/cjs-and-esm-modules-in-node-js-a-comparison-of-advantages-and-disadvantages/

<img src="https://github.com/user-attachments/assets/c7374982-92b7-43cf-a141-2107832e89ec" width="400" />
</details>

<details>
  <summary>ì„¸ë¯¼</summary>
  ## AMD
- ëª¨ë“ˆê³¼ ì˜ì¡´ì„± ëª¨ë‘ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œí•  ìˆ˜ ìˆëŠ” ë°©ì‹
  - ë†’ì€ ìœ ì—°ì„±
  - ì½”ë“œê°„ ëŠìŠ¨í•œ ê²°í•©
- Dojo, MooTools, jQuery ë“±ê³¼ ê°™ì€ í”„ë¡œì íŠ¸ì— ë„ì…

### AMD ëª¨ë“ˆ í˜•íƒœ

- ëª¨ë“ˆ ì •ì˜ë¶€: define ë©”ì„œë“œ
- ì˜ì¡´ì„± ë¡œë”© ì²˜ë¦¬ë¶€: require ë©”ì„œë“œ

```js
define('myModule', ['dependency1', 'dependency2'], function (dep1, dep2) {
  let privateVar = 'private';

  // ëª¨ë“ˆì— ì ‘ê·¼ê°€ëŠ¥í•œ Public API
  return {
    publicMethod: function () {
      return dep1.someMethod() + ' ' + dep2.anotherMethod();
    },
    getPrivateVar: function () {
      return privateVar;
    },
  };
});
```

```js
require(['myModule', 'anotherModule'], function (myModule, anotherModule) {
  // define ë¶€ì—ì„œ ì •ì˜í•œ Public API ì‚¬ìš©
  console.log(myModule.publicMethod());
  console.log(anotherModule.someFunction());

  // ì—ëŸ¬ ì²˜ë¦¬
  require.onError = function (err) {
    console.error('ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨:', err);
  };
});
```

### RequireJS ì™€ curl.js ë¡œ AMD ëª¨ë“ˆ ì‚¬ìš©í•˜ê¸°

```js
// RequireJS
require(['app/myModule']);

// ëª¨ë“ˆ ì‚¬ìš©ë¶€...

// curl.js
curl(['app/myModule']);

// ëª¨ë“ˆ ì‚¬ìš©ë¶€...
```

### jQueryì—ì„œ AMD ëª¨ë“ˆ ì‚¬ìš©í•˜ê¸°

```js
// jQueryë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ê°€ì§€ëŠ” AMD ëª¨ë“ˆ ì •ì˜
define('jqueryModule', ['jquery'], function ($) {
  return {
    // jQueryë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ
    createElement: function (selector) {
      return $(selector);
    },

    // jQuery í”ŒëŸ¬ê·¸ì¸ í™•ì¥
    initPlugin: function () {
      $.fn.myPlugin = function () {
        return this.each(function () {
          $(this).css('color', 'red');
        });
      };
    },

    // jQuery ì´ë²¤íŠ¸ í•¸ë“¤ë§
    setupEvents: function () {
      $('.button').on('click', function () {
        console.log('Button clicked!');
      });
    },
  };
});

// jQuery ëª¨ë“ˆ ì‚¬ìš© ì˜ˆì‹œ
require(['jquery', 'jqueryModule'], function ($, jqueryModule) {
  // ëª¨ë“ˆ ì´ˆê¸°í™”
  jqueryModule.initPlugin();

  // jQuery í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©
  $('.element').myPlugin();

  // ì´ë²¤íŠ¸ ì„¤ì •
  jqueryModule.setupEvents();
});
```

- AMD ëª¨ë“ˆ ë°©ì‹ì€ ì´ˆê¸° ì‘ì„±í•´ì•¼í•˜ëŠ” ì½”ë“œê°€ ì¢€ ìˆì–´ì„œ ê·€ì°®ì€ë“¯. ì–´ëŠì •ë„ í˜•íƒœì— ìµìˆ™í•´ì§€ë©´ ëª¨ë“ˆë¡œì„œ ì‚¬ìš©ì„±ì´ ì¢‹ë‹¤ê³  ëŠê»´ì§.

## CommonJS

- Server Side ê´€ì ì—ì„œ ëª¨ë“ˆí™”
  - Node.js í™˜ê²½ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ íŒ¨í‚¤ì§•í•˜ê¸° ìœ„í•´ ì²˜ìŒ ë“±ì¥
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì¸ ì™¸ë¶€ ì˜ì¡´ì— ê³µê°œí•  íŠ¹ì • ê°ì²´ë¥¼ ë‚´ë³´ëƒ„ (exports)

```js
// foo.js
exports.bar = 'hello world';

// main.js
const foo = require('./foo');
console.log(foo.bar); // hello world
```

### Node JS í™˜ê²½ê³¼ ë¸Œë¼ìš°ì € í™˜ê²½

Common JSëŠ” í•­ìƒ ê°ì²´ë¥¼ ë‚´ë³´ë‚´ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ë” ì„¸ë°€í•œ ë°©ì‹ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ í•˜ëŠ”ë°ëŠ” ES2015, AMDê°€ ë” ìœ ë¦¬í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ES2015 ëª¨ë“ˆì€ ì„œë²„ì—ì„œ Common JS ëŒ€ì•ˆìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

- require() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•­ìƒ Common JS ëª¨ë“ˆ ë¡œë”
- import() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•­ìƒ ECMAScript ëª¨ë“ˆ ë¡œë”

ì´ëŠ” package.json íŒŒì¼ì— ì„¤ì •ëœ typeê³¼ ìƒê´€ ì—†ì´ í•­ìƒ ì ìš©ëœë‹¤.

## UMD

- AMDì™€ CommonJSë¥¼ ëª¨ë‘ ì§€ì›í•˜ëŠ” ëª¨ë“ˆ ì‹œìŠ¤í…œ
- ë¸Œë¼ìš°ì €ì™€ Node.js í™˜ê²½ ëª¨ë‘ì—ì„œ ë™ì‘í•˜ë„ë¡ ì„¤ê³„
- ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ê°ì§€í•˜ì—¬ ì ì ˆí•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘

```js
// UMD íŒ¨í„´ ì˜ˆì‹œ
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD í™˜ê²½
    define(['jquery'], factory);
  } else if (typeof exports === 'object') {
    // CommonJS í™˜ê²½
    module.exports = factory(require('jquery'));
  } else {
    // ë¸Œë¼ìš°ì € ì „ì—­ í™˜ê²½
    root.myModule = factory(root.jQuery);
  }
})(this, function ($) {
  // ëª¨ë“ˆ êµ¬í˜„ë¶€
  return {
    sayHello: function () {
      console.log('Hello from UMD module!');
    },
  };
});
```

### UMDì˜ ì£¼ìš” íŠ¹ì§•

1. í™˜ê²½ ê°ì§€

   - AMD í™˜ê²½: `define` í•¨ìˆ˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
   - CommonJS í™˜ê²½: `exports` ê°ì²´ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
   - ë¸Œë¼ìš°ì € í™˜ê²½: ì „ì—­ ê°ì²´ì— ëª¨ë“ˆ ë…¸ì¶œ

2. ì¥ì 

   - ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ë™ì‘ ê°€ëŠ¥
   - ê¸°ì¡´ ëª¨ë“ˆ ì‹œìŠ¤í…œê³¼ì˜ í˜¸í™˜ì„±
   - ë¼ì´ë¸ŒëŸ¬ë¦¬ ë°°í¬ì— ì í•©

3. ë‹¨ì 
   - ì½”ë“œê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆìŒ
   - ë²ˆë“¤ëŸ¬ ì‚¬ìš© ì‹œ ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ í¬í•¨ë  ìˆ˜ ìˆìŒ

</details>
