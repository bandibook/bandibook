### useStateì™€ useContext íƒêµ¬í•˜ê¸°

**`ğŸ“Œ ë„ˆë¬´ ì¢‹ì•˜ë˜ ìë£Œ ê³µìœ !`**

- [ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì•ˆ ì•Œë ¤ì£¼ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ Context API ì˜ ì“°ëŠ” ë°©ë²•](https://velog.io/@velopert/react-context-tutorial)

#### useCotextì™€ useState ì‚¬ìš©í•˜ê¸°

```jsx
const App = () => {
  const [count, setCount] = useState(0);

  return (
    <CountStateContext.Provider value={{ count, setCount }}>
      <Parent />
    </CountStateContext.Provider>
  );
};
```

- ê°€ê¹Œìš´ `Provider`ë¡œë¶€í„° ì»¨í…ìŠ¤íŠ¸ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.

### ì»¨í…ìŠ¤íŠ¸ ì´í•´í•˜ê¸°

```
ğŸ’¡ Providerê°€ ìƒˆë¡œìš´ ê°’ì„ ê°–ê²Œ ë˜ë©´, ì´ ê°’ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì€ ëª¨ë‘ ë¦¬ë Œë”ë§ëœë‹¤.
``
```

#### ì»¨í…ìŠ¤íŠ¸ ì „íŒŒì˜ ì‘ë™ ë°©ì‹

ë‚´ìš© ëŒì–´ì˜¬ë¦¬ê¸° ë˜ëŠ” memoë¥¼ ì‚¬ìš©í•˜ë©´
**Contextì˜ ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ëŠ”ë°ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°©ì§€**í•  ìˆ˜ ìˆë‹¤.

```jsx
const ColorContext = createContext('black');

const ColorComponent = () => {
  const color = useContext(ColorContext);
  const renderCount = useRef(1);

  useEffect(() => {
    renderCount.current += 1;
  });

  return (
    <div style={{ color }}>
      Hello {color} (renders: {renderCount.current})
    </div>
  );
};
```

```
ğŸ’¡ memoë„ ì»¨í…ìŠ¤íŠ¸ ê°’ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ì„ ë§‰ì§€ëŠ” ëª»í•œë‹¤.
```

#### ì»¨í…ìŠ¤íŠ¸ì— ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•Œì˜ í•œê³„ì 

```jsx
const CountContext = createContext({ count1: 0, count2: 0 });
```

ìœ„ì™€ ê°™ì´ ë§Œë“¤ê³ , Component1ì—ì„œëŠ” count1ë§Œì„ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ê³  Component2ì—ì„œëŠ” count2ë§Œì„ ê°€ì ¸ì™€ ì‚¬ìš©í•œë‹¤ê³  í•´ë³´ì.

ğŸ‘‰ ì´ëŸ´ ê²½ìš°, count1ì´ ë³€ê²½ â†’ context ê°’ ë³€ê²½ â†’ ì´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§

ì¦‰, ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šë˜ Component2ë„ ê°™ì€ contextë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ëŠ” ì´ìœ ë§Œìœ¼ë¡œ ë¦¬ë Œë”ë§

### ì „ì—­ ìƒíƒœë¥¼ ìœ„í•œ ì»¨í…ìŠ¤íŠ¸ ë§Œë“¤ê¸°

```
ğŸ“Œ ê¶ê¸ˆí•œ ì 
- ì „ì—­ ìƒíƒœë¥¼ ìœ„í•˜ì§€ ì•Šì€ ì»¨í…ìŠ¤íŠ¸ë„ ìˆëŠ”ê°€?
```

- ì›ë˜, props drillingì„ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ì—ˆëŠ”ë°
- ì´ê±¸ useStateì™€ useReducerì™€ ì¡°í•©í•˜ë©´ì„œ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ëœ ê²ƒ

```
ğŸ¤” ì»¨í…ìŠ¤íŠ¸ë¥¼ ì „ì—­ ìƒíƒœë¡œ ì‚¬ìš©í–ˆì„ ë•Œ, ë¦¬ë Œë”ë§ ë¬¸ì œ ì¡´ì¬ ì–´ë–»ê²Œ í•´ê²°í•´ë³¼ ìˆ˜ ìˆì„ê¹Œ?
```

#### 1. ì‘ì€ ìƒíƒœ ì¡°ê° ë§Œë“¤ê¸°

- í•©ì³ì§„ í° ê°ì²´ ì‚¬ìš© X â†’ ê° ì¡°ê°ì— ëŒ€í•œ ì»¨í…ìŠ¤íŠ¸

ğŸ‘‰ ìƒíƒœë§ˆë‹¤ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë”°ë¡œ ë‘ì–´, ë‹¤ê°™ì´ ë¦¬ë Œë”ë§ì´ ë˜ë˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì‹¶ì€ ê²ƒ

#### 2. useReducerë¡œ í•˜ë‚˜ì˜ ìƒíƒœë¥¼ ë§Œë“¤ê³  ì—¬ëŸ¬ ì»¨í…ìŠ¤íŠ¸ë¡œ ì „íŒŒí•˜ê¸°

- ë‹¨ì¼ ìƒíƒœë¥¼ ë§Œë“¤ê³ , ì—¬ëŸ¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•´ ìƒíƒœ ì¡°ê°ì„ ë°°í¬
- ìƒíƒœì™€ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°ê°ì˜ ì»¨í…ìŠ¤íŠ¸ë¡œ

ğŸ‘‰ useReducer í•˜ë‚˜ë¥¼ í†µí•´ ìƒíƒœë“¤(ex. count1, count2)ë¥¼ ê´€ë¦¬í•˜ê³  ProviderëŠ” ë”°ë¡œ ë‘”ë‹¤

**ì¦‰, ê´€ë¦¬ëŠ” í•œ ê³³ì—ì„œ í•˜ë˜, ì „íŒŒë¥¼ ë”°ë¡œ í•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í–ˆë‹¤.**

### ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©ì„ ìœ„í•œ ëª¨ë²” ì‚¬ë¡€

ì „ì—­ ìƒíƒœë¥¼ ìœ„í•œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ì„¸ ê°€ì§€ íŒ¨í„´

- ì»¤ìŠ¤í…€ í›…ê³¼ Provider ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°
- ì»¤ìŠ¤í…€ í›…ì´ ìˆëŠ” íŒ©í† ë¦¬ íŒ¨í„´
- reduceRightë¥¼ ì´ìš©í•œ Provider ì¤‘ì²© ë°©ì§€í•˜ê¸°

#### 1. ì»¤ìŠ¤í…€ í›…ê³¼ Provider ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

- ìƒíƒœë¥¼ ìƒì„±í•˜ê³  Providerì— ì „ë‹¬í•˜ëŠ” ë¡œì§ì„ Provider ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```jsx
export const Count1Provider = ({ children }) => {
  return <Count1Context.Provider value={useState(0)}>{children}</Count1Context.Provider>;
};
```

- useContextë¡œ ê°’ì„ ê°€ì ¸ì˜¬ ë•Œ, ìƒìœ„ì— Providerê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ”ë°
- ì˜¬ë°”ë¥¼ ë•ŒëŠ” ê°’ì„, ì˜¬ë°”ë¥´ì§€ ì•Šì„ ë•ŒëŠ” ì—ëŸ¬ë¥¼ ë˜ì§€ëŠ” ë¡œì§ì„ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ

```jsx
export const useCount1 = () => {
  const value = useContext(Count1Context);
  if (value === null) throw new Error('Provider missing');
  return value;
};
```

#### 2. ì»¤ìŠ¤í…€ í›…ì´ ìˆëŠ” íŒ©í† ë¦¬ íŒ¨í„´

- ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“¤ê³  Provider ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ë°˜ë³µì ì¼ ìˆ˜ ìˆë‹¤.
  - ìƒíƒœê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ í•´ì•¼í•˜ëŠ” ê²ƒì´ë¯€ë¡œ

```jsx
const createStateContext = (useValue) => {
  const StateContext = createContext(null);
  const StateProvider = ({ initialValue, children }) => {
    return <StateContext.Provider value={useValue(initialValue)}>{children}</StateContext.Provider>;
  };

  const useContextState = () => {
    const value = useContext(StateContext);
    if (value === null) throw new Error('Provider missing');
    return value;
  };

  return [StateProvider, useContextState] as const
};
```

```
ğŸ“Œ toss/slashì—ì„œë„ ì´ëŸ° ëŠë‚Œ(?)ì˜ ìœ í‹¸ì„ ì œê³µí•˜ê³  ìˆë‹¤.
```

- [buildContext](https://www.slash.page/ko/libraries/react/react/src/utils/buildContext.i18n)
- [ì½”ë“œ ëœ¯ì–´ë³´ê¸°](https://github.com/toss/slash/blob/main/packages/react/react/src/utils/buildContext.tsx)

#### 3. reduceRightë¥¼ ì´ìš©í•œ Provider ì¤‘ì²© ë°©ì§€

- reduceRight = reduceë‘ ë˜‘ê°™ì€ë°, ë§ˆì§€ë§‰ indexë¶€í„° ì¶œë°œ
- reduceRightë¥¼ ì‚¬ìš©í•˜ì—¬ Providerë¥¼ return í•˜ëŠ” ë¡œì§ì„ ë¦¬íŒ©í„°ë§ ê°€ëŠ¥
