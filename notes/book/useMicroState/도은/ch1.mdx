### 마이크로 상태 관리 이해하기

```
💡 React에서 상태는?
   사용자 인터페이스(UI)를 나타내는 모든 데이터를 말한다.
```

기본적인 상태 관리

- 상태 읽기
- 상태 업데이트
- 상태 기반 렌더링

추가적인 기능

- 리렌더링 최적화
- 다른 시스템과의 상호 작용
- 비동기 지원
- 파생 상태

### 리액트 훅 사용하기

```jsx
const useCount = () => {
  const [count, useCount] = useState(0);
  return [count, useCount];
};

const Component = () => {
  const [count, useCount] = useCount();

  return ...
};
```

👆 크게 달라질 것이 없기 때문에 불필요하게 복잡해졌다고 생각할 수 있다.

다음 두 가지 관점을 생각해보자.

- `useCount`라는 이름을 통해 더 명확해졌다.
  - 사용자 정의 훅 → 코드 가독성 향상
- `Component`가 `useCount` 구현과 분리되었다.
  - 컴포넌트를 건드리지 않고도 기능을 추가할 수 있다.

이처럼, 다양한 목적에 맞는 사용자 정의 훅을 제공할 수 있다.

```
💡 단순히 작은 기능을 추가하는 Wrapper가 될 수 있고
   더 큰 역할을 하는 거대한 훅이 될 수 있다.
```

### 전역 상태 탐구하기

```
💡 컴포넌트 자체는 전역 상태에 가급적 의존하지 않는 것이 좋다.
```

👆 위의 문장 곱씹어보기

- 컴포넌트는 지역성이 중요하다.
  - **독립적이여야 하고, 재사용이 가능해야 한다는 것을 의미**
  - 외부에 의존하는 경우, 동작이 일관되지 않거나 재사용이 불가능할 수 있다.

**🤔 컴포넌트가 외부에 의존하여 재사용이 불가능한 경우**

```jsx
const Foo = () => {
  const { bar } = useContext(BarContext);

  return ...
};
```

위 컴포넌트를 재사용하기를 원한다면 `<BarContext.Provider>`를 반드시 상위에 감싼 후 사용해야 한다.

그렇지 못할 경우 의도대로 동작하지 않을 것..😓

### useState 사용하기

```jsx
<button onClick={() => setCount(1)}>
```

👆 버튼을 여러 번 클릭하면 `setCount(1)`을 다시 호출하지만, 동일한 값이기 때문에 '**베일아웃**'되어 리렌더링 X

```
💡 베일아웃
   리렌더링을 발생시키지 않는 것
```

<br />

**🤔 아래 코드의 차이점은 뭘까?**

```jsx
// 1
<button onClick={() => setCount(count + 1)}>

// 2
<button onClick={() => setCount(c => c + 1)}>
```

- 1은 카운트가 증가
- 2는 실제 버튼을 클릭한 횟수를 센다.

따라서, 1의 경우 여러 상태 업데이트가 동시에 일어날 경우 예상치 못한 결과를 초래할 수 있다.

2의 경우, 상태 업데이트가 **이전 상태에 기반하여 이루어진다**는 점에서 연속적인 상태 업데이트가 발생할 경우에도 각 업데이트가 이전 업데이트의 결과에 기반하기 때문에, 상태 업데이트가 정확하게 반영된다.

### useReducer와 useState

```
💡 기본적으로 동일하며 상호 교환 가능
   → 각자 선호도나 프로그래밍 스타일에 따라 둘 중 하나를 선택하면 된다.
```

**🤔 그런데 왜 우리는 `useState`를 더 많이 사용하는 것일까?**

- 간결하고, 대부분의 컴포넌트 상태 관리 요구사항은 `useState`로 충분히 해결 가능
- 러닝 커브도 낮다.

**🤔 `useReducer`가 더 적합한 경우?**

- 결국에는 둘 다 **상태관리**를 위한 훅이라서
- useState로 해결할 수 없는 상황은 드물다.
- gpt 왈.. 복잡한 상태 관리에서 useReducer가 더 적합할 수 있다고..
- 개인적인 생각, 케이스 별로 상태 관리를 해야 한다면 useReducer가 적합할 수도..?
  - 러닝 커브 대비하면, useState로도 충분히 커버 가능할 거 같기도
